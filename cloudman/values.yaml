# CloudMan has the same dependencies and structure as cloudlaunch,
# and only differs in the container images.

admin_firstname: "CloudMan"
admin_lastname: "Admin"
admin_email: "cloudman@someplace.org"

projman_config:
  projects:
    initial:
      charts:
        galaxy:
          install_template: galaxy
        jupyter:
          install_template: jupyter
        rstudio:
          install_template: rstudio
        terminalman:
          install_template: terminalman

helmsman_config:
  repositories:
     - name: cloudve
       url: https://raw.githubusercontent.com/CloudVE/helm-charts/gvl-5.0/
     - name: jupyterhub
       url: https://jupyterhub.github.io/helm-chart/
     - name: alex
       url: https://raw.githubusercontent.com/almahmoud/helm-charts/nextclouddev/
  install_templates:
    projman:
      repo: alex
      chart: nextcloud
      display_name: Data Browser
      summary: Upload your data and connect external storage through Nextcloud.
      icon_url: "https://upload.wikimedia.org/wikipedia/commons/6/60/Nextcloud_Logo.svg"
      screenshot_url: assets/images/screenshot_nextcloud.png
      context:
        oidc_client_secret: '{{ .Values.oidc_clients.nextcloud.client_secret }}'
        oidc_client_id: '{{ .Values.oidc_clients.nextcloud.client_id }}'
        domain: '{{ .Values.global.domain }}'
        starting_dir: '/gvl'
      template: |
        postgresql:
          fullnameOverride: "{{context.project.namespace}}-nextcloud-postgresql"
          postgresqlUsername: "nextcloud"
          postgresqlDatabase: "nextcloud"
          existingSecret: "{{context.project.namespace}}-projman-secrets"

          persistence:
            enabled: true

        image:
          command: |
            - /bin/bash
          args: |
            - -c
            - sed -i 's!exec "$@"!mkdir /start \&\& echo "Done" > /start/command\nexec "$@"!g' /entrypoint.sh && cat /entrypoint.sh && /entrypoint.sh apache2-foreground

        ingress:
          enabled: true
          access_path: "{{context.project.access_path}}/nextcloud/"
          hosts:
            {%- if not (context.domain | ipaddr) %}
            - host: '{{context.domain}}'
              paths:
                - {{context.project.access_path}}/nextcloud(/|$)(.*)
            {%- endif %}
          annotations:
            nginx.ingress.kubernetes.io/proxy-body-size: "10G"
            nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
            nginx.ingress.kubernetes.io/rewrite-target: "/$2"

        nextcloud:
          configs:
            path.config.php: |
              <?php
              $CONFIG = array (
                'overwriteprotocol' => 'https',
                'theme' => 'galaxy',
                'overwritewebroot' => '{{context.project.access_path}}/nextcloud',
                'overwritehost'     => '{{context.domain}}',
                'overwrite.cli.url' => 'https://{{context.domain}}/{{context.project.access_path}}/nextcloud',
                'filesystem_check_changes' => 1,
                'check_data_directory_permissions' => false,
                'skeletondirectory' => '',
                'allow_user_to_change_display_name' => false,
                'lost_password_link' => 'disabled',
                'oidc_login_default_quota' => 0,
                'oidc_login_client_id' => '{{context.oidc_client_id}}',
                'oidc_login_client_secret' => '{{context.oidc_client_secret}}',
                'oidc_login_provider_url' => 'https://{{context.domain}}/auth/realms/master',
                'oidc_login_logout_url' => 'https://{{context.domain}}/auth/realms/master/protocol/openid-connect/logout?redirect_uri=https%3A%2F%2F{{context.domain}}%2F{{context.project.access_path}}%2Fnextcloud%2F',
                'oidc_login_scope' => 'openid profile',
                'oidc_login_auto_redirect' => true,
                'oidc_login_redir_fallback' => true,
                'oidc_login_use_external_storage' => true,
                'oidc_login_disable_registration' => false,
                'oidc_login_attributes' => array(
                  'id' => 'preferred_username',
                  'mail' => 'email',
                ),
              );

          host: "{{context.domain}}"
          extraVolumes:
            - name: public-data
              persistentVolumeClaim:
                claimName: "{{context.project.namespace}}-public-data-pvc"
            - name: project-data
              persistentVolumeClaim:
                claimName: "{{context.project.namespace}}-project-data-pvc"
            - name: projman-configs
              configMap:
                name: {{context.project.namespace}}-projman-configs
                items:
                  - key: "defaults.php"
                    path: "defaults.php"
                  - key: "server.css"
                    path: "core/css/server.css"
                  - key: "gvllogo.svg"
                    path: "core/img/gvllogo.svg"
                  - key: "galaxy-icon.svg"
                    path: "gvl-extras/galaxy-icon.svg"
                  - key: "jupyter-icon.svg"
                    path: "gvl-extras/jupyter-icon.svg"
                  - key: "rstudio-icon.svg"
                    path: "gvl-extras/rstudio-icon.svg"
                  - key: "terminal-icon.svg"
                    path: "gvl-extras/terminal-icon.svg"


          extraVolumeMounts:
            - name: public-data
              mountPath: /gvl/public
            - name: project-data
              mountPath: /gvl/projects/current
            - name: projman-configs
              mountPath: /var/www/html/themes/galaxy

        persistence:
          enabled: false

        internalDatabase:
          enabled: false

        externalDatabase:
          enabled: true
          type: "postgresql"
          host: "{{context.project.namespace}}-nextcloud-postgresql"
          existingSecret:
            enabled: true
            secretName: "{{context.project.namespace}}-projman-secrets"
            passwordKey: "postgresql-password"

        lifecycle:
          postStartCommand:
            - su
            - www-data
            - -s
            - /bin/bash
            - -c
            - > 
              PATH=/var/www/html:$PATH;
              until [ -f /start/command ];
              do
                  sleep 45;
              done; occ app:update --all; occ upgrade; occ app:enable files_external; occ app:disable photos; occ app:disable theming; occ app:disable gallery; occ app:install oidc_login; occ app:install external; occ config:app:set --value yes files_external allow_user_mounting; occ config:app:set --value 'ftp,dav,owncloud,sftp,amazons3,swift,\OC\Files\Storage\SFTP_Key' files_external user_mounting_backends; occ files_external:create -c "datadir=/gvl" / local null::null; if [ -d "/var/www/html/themes/galaxy/gvl-extras" ]; then
                  occ maintenance:theme:update;
                  mkdir -p "/var/www/html/data/appdata_$(occ config:system:get instanceid)/external/icons" && cp /var/www/html/themes/galaxy/gvl-extras/*.svg "/var/www/html/data/appdata_$(occ config:system:get instanceid)/external/icons";
              fi; occ config:app:set external sites --value='[["RStudio","https://am-devinstance.cloudve.org/{{context.project.namespace}}/rstudio/","rstudio-icon.svg"],["Terminal","https://am-devinstance.cloudve.org/{{context.project.namespace}}/terminalman/","terminal-icon.svg"],["JupyterHub","https://am-devinstance.cloudve.org/{{context.project.namespace}}/jupyterhub/oauth_login","jupyter-icon.svg"],["Galaxy","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/","galaxy-icon.svg"],["Data Libraries","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/library/list","galaxy-icon.svg"],["Workflows","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/workflows/list","galaxy-icon.svg"],["Data Libraries","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/library/list","galaxy-icon.svg"],["Published Histories","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/histories/list_published","galaxy-icon.svg"],["Published Workflows","https://am-devinstance.cloudve.org/{{context.project.namespace}}/galaxy/workflows/list_published","galaxy-icon.svg"]]';


        projman:
          projectName: "{{context.project.namespace}}"
          data:
            project:
              name: "{{context.project.namespace}}-project-data"
              storageClass: "rclone"
              accessMode: "ReadWriteMany"
              size: 50Gi
              persistentVolume:
                extraSpec:
                  csi:
                    driver: csi-rclone
                    volumeHandle: {{context.project.namespace}}-project-data-pv
                    volumeAttributes:
                      remotePathSuffix: "/projects/{{context.project.namespace}}"
                      file-perms: "0777"
                      links: "true"
                      vfs-cache-mode: "full"
            public:
              name: "{{context.project.namespace}}-public-data"
              storageClass: "rclone"
              accessMode: "ReadWriteMany"
              size: 50Gi
              persistentVolume:
                extraSpec:
                  csi:
                    driver: csi-rclone
                    volumeHandle: {{context.project.namespace}}-public-data-pv
                    volumeAttributes:
                      remotePathSuffix: "/public"
                      file-perms: "0777"
                      links: "true"
                      vfs-cache-mode: "full"

          secrets:
            postgresql-password: "{{ random_alphanumeric(20) }}"
            db-username: "nextcloud"

          configs:
            jupyter_notebook_config.py: |
              c.NotebookApp.notebook_dir = '{{context.starting_dir}}'

            rserver.conf: |
              rsession-which-r=/usr/local/bin/R
              auth-none=1
              www-frame-origin={{context.domain}}

            server.css: |
              #header .logo,
              #firstrunwizard .logo {
                background-image: url('../img/gvllogo.svg');
                width: 80px;
              }

            defaults.php: |
              <?php
              /**
               * @author Björn Schießle <schiessle@owncloud.com>
               * @author Jan-Christoph Borchardt, http://jancborchardt.net
               * @copyright Copyright (c) 2016, ownCloud, Inc.
               * @license AGPL-3.0
               *
               * This code is free software: you can redistribute it and/or modify
               * it under the terms of the GNU Affero General Public License, version 3,
               * as published by the Free Software Foundation.
               *
               * This program is distributed in the hope that it will be useful,
               * but WITHOUT ANY WARRANTY; without even the implied warranty of
               * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
               * GNU Affero General Public License for more details.
               *
               * You should have received a copy of the GNU Affero General Public License, version 3,
               * along with this program.  If not, see <http://www.gnu.org/licenses/>
               */

              class OC_Theme {

                /**
                 * Returns the base URL
                 * @return string URL
                 */
                public function getBaseUrl() {
                  return 'https://cloudve.org';
                }

                /**
                 * Returns the documentation URL
                 * @return string URL
                 */
                public function getDocBaseUrl() {
                  return 'https://docs.nextcloud.com';
                }

                /**
                 * Returns the title
                 * @return string title
                 */
                public function getTitle() {
                  return 'GVL';
                }

                /**
                 * Returns the short name of the software
                 * @return string title
                 */
                public function getName() {
                  return 'GVL';
                }

                /**
                 * Returns the short name of the software containing HTML strings
                 * @return string title
                 */
                public function getHTMLName() {
                  return 'GVL';
                }

                /**
                 * Returns entity (e.g. company name) - used for footer, copyright
                 * @return string entity name
                 */
                public function getEntity() {
                  return 'CloudVE';
                }

                /**
                 * Returns slogan
                 * @return string slogan
                 */
                public function getSlogan() {
                  return '';
                }

                /**
                 * Returns logo claim
                 * @return string logo claim
                 * @deprecated 13.0.0 not used anymore
                 */
                public function getLogoClaim() {
                  return '';
                }

                /**
                 * Returns short version of the footer
                 * @return string short footer
                 */
                public function getShortFooter() {
                  $footer = '© ' . date('Y') . ' <a href="' . $this->getBaseUrl() . '" target="_blank">' . $this->getEntity() . '</a>' .
                    '<br/>' . $this->getSlogan();

                  return $footer;
                }

                /**
                 * Returns long version of the footer
                 * @return string long footer
                 */
                public function getLongFooter() {
                  $footer = '© ' . date('Y') . ' <a href="' . $this->getBaseUrl() . '" target="_blank">' . $this->getEntity() . '</a>' .
                    '<br/>' . $this->getSlogan();

                  return $footer;
                }

                /**
                 * Generate a documentation link for a given key
                 * @return string documentation link
                 */
                public function buildDocLinkToKey($key) {
                  return $this->getDocBaseUrl() . '/server/15/go.php?to=' . $key;
                }


                /**
                 * Returns mail header color
                 * @return string
                 */
                public function getColorPrimary() {
                  return '#2C3143';
                }

                /**
                 * Returns variables to overload defaults from core/css/variables.scss
                 * @return array
                 */
                public function getScssVariables() {
                  return [
                    'color-primary' => '#2C3143'
                  ];
                }

              }


            gvllogo.svg: |
              <?xml version="1.0" encoding="UTF-8" standalone="no"?>
              <!-- Generator: Adobe Illustrator 23.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->

              <svg
                 xmlns:dc="http://purl.org/dc/elements/1.1/"
                 xmlns:cc="http://creativecommons.org/ns#"
                 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                 xmlns:svg="http://www.w3.org/2000/svg"
                 xmlns="http://www.w3.org/2000/svg"
                 xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                 xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                 version="1.1"
                 id="Layer_1"
                 x="0px"
                 y="0px"
                 viewBox="0 0 516.36997 169.02"
                 xml:space="preserve"
                 sodipodi:docname="2018-gvl-logo-landscape-CMYK.svg"
                 width="516.37"
                 height="169.02"
                 inkscape:version="0.92.2 5c3e80d, 2017-08-06"><metadata
                   id="metadata84"><rdf:RDF><cc:Work
                       rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                         rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
                   id="defs82" /><sodipodi:namedview
                   pagecolor="#ffffff"
                   bordercolor="#666666"
                   borderopacity="1"
                   objecttolerance="10"
                   gridtolerance="10"
                   guidetolerance="10"
                   inkscape:pageopacity="0"
                   inkscape:pageshadow="2"
                   inkscape:window-width="1920"
                   inkscape:window-height="1155"
                   id="namedview80"
                   showgrid="false"
                   inkscape:pagecheckerboard="true"
                   inkscape:zoom="1"
                   inkscape:cx="-19.323699"
                   inkscape:cy="-98.980458"
                   inkscape:window-x="0"
                   inkscape:window-y="1"
                   inkscape:window-maximized="1"
                   inkscape:current-layer="Layer_1" /><style
                   type="text/css"
                   id="style2">
                .st0{fill:#FFFFFF;}
                .st1{fill:#81848A;}
                .st2{fill:#27A2DB;}
                .st3{fill:url(#SVGID_1_);}
              </style><g
                   id="g123"
                   transform="translate(-38.969993,-213.13)"><g
                     id="g60"><g
                       id="g22"><path
                         id="path6"
                         d="m 223.23,301.57 c 0,7.5 -1.91,12.99 -5.71,16.47 -3.81,3.48 -9.65,5.22 -17.5,5.22 -2.88,0 -5.69,-0.24 -8.42,-0.72 -2.73,-0.48 -5.21,-1.11 -7.42,-1.89 l 1.98,-9.27 c 1.86,0.78 3.97,1.41 6.34,1.89 2.37,0.48 4.93,0.72 7.69,0.72 4.38,0 7.5,-0.9 9.36,-2.7 1.86,-1.8 2.79,-4.47 2.79,-8.01 v -1.8 c -1.08,0.54 -2.51,1.08 -4.28,1.62 -1.77,0.54 -3.79,0.81 -6.07,0.81 -3,0 -5.75,-0.48 -8.24,-1.44 -2.49,-0.96 -4.62,-2.37 -6.39,-4.23 -1.77,-1.86 -3.15,-4.19 -4.14,-6.98 -0.99,-2.79 -1.48,-6.01 -1.48,-9.67 0,-3.42 0.52,-6.57 1.57,-9.45 1.05,-2.88 2.58,-5.34 4.59,-7.38 2.01,-2.04 4.46,-3.63 7.33,-4.77 2.88,-1.14 6.15,-1.71 9.81,-1.71 3.54,0 6.9,0.27 10.08,0.81 3.18,0.54 5.88,1.11 8.1,1.71 v 40.77 z M 192.9,281.59 c 0,4.62 1,8 3.01,10.12 2.01,2.13 4.6,3.19 7.79,3.19 1.74,0 3.38,-0.24 4.9,-0.72 1.53,-0.48 2.78,-1.05 3.74,-1.71 v -24.39 c -0.78,-0.18 -1.74,-0.34 -2.88,-0.5 -1.14,-0.15 -2.58,-0.23 -4.32,-0.23 -3.96,0 -6.99,1.31 -9.09,3.92 -2.1,2.62 -3.15,6.06 -3.15,10.32 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path8"
                         d="m 232.23,283.03 c 0,-4.14 0.61,-7.77 1.84,-10.89 1.23,-3.12 2.86,-5.71 4.91,-7.78 2.04,-2.07 4.38,-3.63 7.02,-4.68 2.64,-1.05 5.34,-1.58 8.1,-1.58 6.48,0 11.53,2.01 15.17,6.03 3.63,4.02 5.44,10.02 5.44,18 0,0.6 -0.02,1.28 -0.04,2.02 -0.03,0.75 -0.08,1.43 -0.13,2.02 h -31.05 c 0.3,3.78 1.63,6.71 4,8.78 2.37,2.07 5.8,3.1 10.3,3.1 2.64,0 5.05,-0.24 7.25,-0.72 2.19,-0.48 3.92,-0.99 5.17,-1.53 l 1.44,8.91 c -0.6,0.3 -1.43,0.62 -2.48,0.95 -1.05,0.33 -2.25,0.63 -3.6,0.9 -1.35,0.27 -2.81,0.5 -4.37,0.67 -1.56,0.18 -3.15,0.27 -4.77,0.27 -4.14,0 -7.74,-0.62 -10.8,-1.84 -3.06,-1.23 -5.58,-2.94 -7.56,-5.13 -1.98,-2.19 -3.45,-4.77 -4.41,-7.74 -0.95,-2.97 -1.43,-6.22 -1.43,-9.76 z m 31.59,-4.86 c 0,-1.5 -0.21,-2.93 -0.63,-4.27 -0.42,-1.35 -1.04,-2.52 -1.85,-3.51 -0.81,-0.99 -1.8,-1.77 -2.97,-2.34 -1.17,-0.57 -2.56,-0.85 -4.18,-0.85 -1.68,0 -3.15,0.31 -4.41,0.94 -1.26,0.63 -2.33,1.46 -3.2,2.48 -0.87,1.02 -1.54,2.19 -2.02,3.51 -0.48,1.32 -0.81,2.67 -0.99,4.05 h 20.25 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path10"
                         d="m 283.98,260.8 c 2.1,-0.6 4.83,-1.17 8.19,-1.71 3.36,-0.54 7.08,-0.81 11.16,-0.81 3.84,0 7.05,0.53 9.63,1.58 2.58,1.05 4.63,2.52 6.17,4.41 1.53,1.89 2.61,4.17 3.24,6.84 0.63,2.67 0.94,5.6 0.94,8.77 v 26.46 h -10.89 v -24.75 c 0,-2.52 -0.17,-4.66 -0.5,-6.44 -0.33,-1.77 -0.87,-3.21 -1.62,-4.32 -0.75,-1.11 -1.77,-1.92 -3.06,-2.43 -1.29,-0.51 -2.87,-0.77 -4.73,-0.77 -1.38,0 -2.82,0.09 -4.32,0.27 -1.5,0.18 -2.61,0.33 -3.33,0.45 v 37.98 H 283.97 V 260.8 Z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path12"
                         d="m 376.95,282.76 c 0,3.72 -0.54,7.11 -1.62,10.17 -1.08,3.06 -2.61,5.67 -4.59,7.83 -1.98,2.16 -4.37,3.84 -7.16,5.04 -2.79,1.2 -5.87,1.8 -9.22,1.8 -3.36,0 -6.42,-0.6 -9.18,-1.8 -2.76,-1.2 -5.13,-2.88 -7.11,-5.04 -1.98,-2.16 -3.53,-4.77 -4.63,-7.83 -1.11,-3.06 -1.67,-6.45 -1.67,-10.17 0,-3.72 0.55,-7.09 1.67,-10.12 1.11,-3.03 2.67,-5.62 4.68,-7.79 2.01,-2.16 4.39,-3.82 7.16,-4.99 2.76,-1.17 5.79,-1.76 9.09,-1.76 3.3,0 6.34,0.59 9.13,1.76 2.79,1.17 5.17,2.83 7.16,4.99 1.98,2.16 3.52,4.76 4.63,7.79 1.11,3.02 1.66,6.4 1.66,10.12 z m -11.16,0 c 0,-4.68 -1,-8.38 -3.01,-11.11 -2.01,-2.73 -4.82,-4.1 -8.42,-4.1 -3.6,0 -6.41,1.37 -8.42,4.1 -2.01,2.73 -3.01,6.44 -3.01,11.11 0,4.74 1,8.49 3.01,11.25 2.01,2.76 4.81,4.14 8.42,4.14 3.6,0 6.4,-1.38 8.42,-4.14 2.01,-2.76 3.01,-6.51 3.01,-11.25 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path14"
                         d="m 412.77,281.59 c 0,-4.92 -0.62,-8.47 -1.84,-10.67 -1.23,-2.19 -3.53,-3.29 -6.89,-3.29 -1.2,0 -2.52,0.09 -3.96,0.27 -1.44,0.18 -2.52,0.33 -3.24,0.45 v 37.98 H 385.95 V 260.8 c 2.1,-0.6 4.84,-1.17 8.24,-1.71 3.39,-0.54 6.97,-0.81 10.75,-0.81 3.24,0 5.9,0.42 7.96,1.26 2.07,0.84 3.79,1.95 5.17,3.33 0.66,-0.48 1.5,-0.99 2.52,-1.53 1.02,-0.54 2.16,-1.04 3.42,-1.48 1.26,-0.45 2.59,-0.82 4,-1.12 1.41,-0.3 2.83,-0.45 4.28,-0.45 3.66,0 6.67,0.53 9.04,1.58 2.37,1.05 4.23,2.52 5.58,4.41 1.35,1.89 2.28,4.17 2.79,6.84 0.51,2.67 0.76,5.6 0.76,8.77 v 26.46 H 439.57 V 281.6 c 0,-4.92 -0.6,-8.47 -1.8,-10.67 -1.2,-2.19 -3.51,-3.29 -6.93,-3.29 -1.74,0 -3.39,0.29 -4.95,0.85 -1.56,0.57 -2.73,1.12 -3.51,1.67 0.48,1.5 0.81,3.09 0.99,4.77 0.18,1.68 0.27,3.48 0.27,5.4 v 26.01 h -10.89 v -24.75 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path16"
                         d="m 473.7,245.5 c 0,2.04 -0.66,3.66 -1.98,4.86 -1.32,1.2 -2.88,1.8 -4.68,1.8 -1.86,0 -3.45,-0.6 -4.77,-1.8 -1.32,-1.2 -1.98,-2.82 -1.98,-4.86 0,-2.1 0.66,-3.75 1.98,-4.95 1.32,-1.2 2.91,-1.8 4.77,-1.8 1.8,0 3.36,0.6 4.68,1.8 1.32,1.2 1.98,2.85 1.98,4.95 z m -1.17,60.84 h -10.89 v -47.07 h 10.89 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path18"
                         d="m 481.53,282.85 c 0,-3.48 0.54,-6.73 1.62,-9.76 1.08,-3.03 2.62,-5.65 4.63,-7.88 2.01,-2.22 4.46,-3.96 7.33,-5.22 2.88,-1.26 6.12,-1.89 9.72,-1.89 4.44,0 8.64,0.81 12.6,2.43 l -2.34,8.91 c -1.26,-0.54 -2.69,-0.99 -4.27,-1.35 -1.59,-0.36 -3.29,-0.54 -5.08,-0.54 -4.26,0 -7.5,1.34 -9.72,4 -2.22,2.67 -3.33,6.44 -3.33,11.29 0,4.68 1.05,8.39 3.15,11.12 2.1,2.73 5.64,4.1 10.62,4.1 1.86,0 3.69,-0.18 5.49,-0.54 1.8,-0.36 3.36,-0.81 4.68,-1.35 l 1.53,9 c -1.2,0.6 -3.02,1.14 -5.45,1.62 -2.43,0.48 -4.94,0.72 -7.51,0.72 -4.02,0 -7.52,-0.62 -10.49,-1.84 -2.97,-1.22 -5.43,-2.94 -7.38,-5.13 -1.95,-2.19 -3.41,-4.8 -4.37,-7.83 -0.95,-3.04 -1.43,-6.32 -1.43,-9.86 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /><path
                         id="path20"
                         d="m 536.16,298.51 c 2.88,0 4.98,-0.34 6.3,-1.04 1.32,-0.69 1.98,-1.87 1.98,-3.55 0,-1.56 -0.71,-2.85 -2.12,-3.87 -1.41,-1.02 -3.73,-2.13 -6.97,-3.33 -1.98,-0.72 -3.8,-1.48 -5.45,-2.29 -1.65,-0.81 -3.08,-1.75 -4.27,-2.83 -1.2,-1.08 -2.15,-2.38 -2.83,-3.92 -0.69,-1.53 -1.04,-3.4 -1.04,-5.62 0,-4.32 1.59,-7.72 4.77,-10.21 3.18,-2.49 7.5,-3.74 12.96,-3.74 2.76,0 5.4,0.26 7.92,0.77 2.52,0.51 4.41,1.01 5.67,1.48 l -1.98,8.82 c -1.2,-0.54 -2.73,-1.04 -4.59,-1.48 -1.86,-0.45 -4.02,-0.68 -6.48,-0.68 -2.22,0 -4.02,0.38 -5.4,1.12 -1.38,0.75 -2.07,1.91 -2.07,3.46 0,0.78 0.13,1.47 0.41,2.07 0.27,0.6 0.73,1.16 1.39,1.67 0.66,0.51 1.53,1.02 2.61,1.53 1.08,0.51 2.4,1.04 3.96,1.58 2.58,0.96 4.77,1.91 6.57,2.83 1.8,0.93 3.29,1.98 4.46,3.15 1.17,1.17 2.03,2.51 2.57,4 0.54,1.5 0.81,3.3 0.81,5.4 0,4.5 -1.67,7.91 -5,10.21 -3.33,2.31 -8.09,3.46 -14.26,3.46 -4.14,0 -7.47,-0.35 -9.99,-1.04 -2.52,-0.69 -4.29,-1.24 -5.31,-1.66 l 1.89,-9.09 c 1.62,0.66 3.56,1.29 5.81,1.89 2.23,0.61 4.8,0.91 7.68,0.91 z"
                         class="st1"
                         inkscape:connector-curvature="0"
                         style="fill:#81848a" /></g><g
                       id="g58"><path
                         id="path24"
                         d="m 291.1,336.55 c -1.11,-2.28 -2.25,-4.89 -3.41,-7.84 -1.17,-2.95 -2.23,-6.12 -3.18,-9.5 h 4.28 c 0.24,0.97 0.53,2.02 0.85,3.13 0.32,1.12 0.67,2.23 1.03,3.35 0.37,1.12 0.74,2.2 1.13,3.25 0.39,1.05 0.75,2 1.08,2.83 0.33,-0.84 0.69,-1.78 1.06,-2.83 0.38,-1.05 0.75,-2.13 1.12,-3.25 0.37,-1.12 0.72,-2.23 1.05,-3.35 0.33,-1.12 0.62,-2.16 0.87,-3.13 h 4.15 c -0.95,3.38 -2.01,6.55 -3.18,9.5 -1.17,2.95 -2.3,5.57 -3.41,7.84 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path26"
                         d="m 308.54,314.13 c 0,0.75 -0.24,1.35 -0.73,1.79 -0.49,0.44 -1.06,0.66 -1.72,0.66 -0.69,0 -1.27,-0.22 -1.76,-0.66 -0.49,-0.44 -0.73,-1.04 -0.73,-1.79 0,-0.77 0.24,-1.38 0.73,-1.82 0.49,-0.44 1.07,-0.66 1.76,-0.66 0.66,0 1.24,0.22 1.72,0.66 0.48,0.44 0.73,1.05 0.73,1.82 z m -0.43,22.42 h -4.01 v -17.34 h 4.01 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path28"
                         d="m 323.1,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path30"
                         d="m 326.38,314.63 4.01,-0.66 v 5.24 h 6.17 v 3.35 h -6.17 v 7.06 c 0,1.39 0.22,2.39 0.66,2.98 0.44,0.6 1.19,0.9 2.25,0.9 0.73,0 1.38,-0.08 1.94,-0.23 0.56,-0.15 1.01,-0.3 1.34,-0.43 l 0.66,3.18 c -0.46,0.2 -1.07,0.4 -1.82,0.61 -0.75,0.21 -1.64,0.31 -2.65,0.31 -1.24,0 -2.27,-0.17 -3.1,-0.5 -0.83,-0.33 -1.49,-0.81 -1.97,-1.44 -0.48,-0.63 -0.83,-1.39 -1.03,-2.29 -0.2,-0.9 -0.3,-1.92 -0.3,-3.07 v -15.01 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path32"
                         d="m 354.67,336.02 c -0.77,0.2 -1.78,0.4 -3.02,0.61 -1.24,0.21 -2.6,0.31 -4.08,0.31 -1.39,0 -2.56,-0.2 -3.5,-0.6 -0.94,-0.4 -1.69,-0.95 -2.25,-1.66 -0.56,-0.71 -0.97,-1.55 -1.21,-2.54 -0.24,-0.99 -0.36,-2.06 -0.36,-3.23 v -9.72 h 4.01 v 9.09 c 0,1.86 0.27,3.18 0.81,3.98 0.54,0.8 1.49,1.19 2.83,1.19 0.49,0 1,-0.02 1.54,-0.07 0.54,-0.04 0.95,-0.1 1.21,-0.17 v -14.03 h 4.01 v 16.84 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path34"
                         d="m 365.55,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.59,0.36 1.39,0.54 2.41,0.54 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path36"
                         d="m 383.52,336.88 c -1.19,-0.02 -2.18,-0.16 -2.97,-0.4 -0.79,-0.24 -1.41,-0.59 -1.87,-1.04 -0.46,-0.45 -0.79,-1.02 -0.98,-1.69 -0.19,-0.67 -0.28,-1.44 -0.28,-2.3 v -19.96 l 4.01,-0.66 v 19.86 c 0,0.49 0.04,0.9 0.12,1.23 0.08,0.33 0.22,0.61 0.42,0.85 0.2,0.24 0.47,0.41 0.81,0.53 0.34,0.12 0.78,0.22 1.31,0.28 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path38"
                         d="m 401.1,336.88 c -1.19,-0.02 -2.18,-0.16 -2.97,-0.4 -0.79,-0.24 -1.41,-0.59 -1.87,-1.04 -0.46,-0.45 -0.79,-1.02 -0.98,-1.69 -0.19,-0.67 -0.28,-1.44 -0.28,-2.3 v -19.96 l 4.01,-0.66 v 19.86 c 0,0.49 0.04,0.9 0.12,1.23 0.08,0.33 0.22,0.61 0.42,0.85 0.2,0.24 0.47,0.41 0.81,0.53 0.34,0.12 0.78,0.22 1.31,0.28 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path40"
                         d="m 410.68,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.59,0.36 1.39,0.54 2.41,0.54 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path42"
                         d="m 438.24,327.89 c 0,1.39 -0.2,2.65 -0.61,3.76 -0.41,1.11 -0.99,2.07 -1.76,2.87 -0.77,0.8 -1.69,1.4 -2.77,1.82 -1.08,0.42 -2.31,0.63 -3.68,0.63 -1.33,0 -2.59,-0.1 -3.8,-0.3 -1.21,-0.2 -2.21,-0.42 -3,-0.66 v -24.54 l 4.01,-0.66 v 8.99 c 0.46,-0.24 1.03,-0.46 1.71,-0.66 0.68,-0.2 1.42,-0.3 2.24,-0.3 1.22,0 2.3,0.22 3.27,0.65 0.96,0.43 1.76,1.04 2.4,1.84 0.64,0.8 1.13,1.75 1.48,2.87 0.34,1.11 0.51,2.34 0.51,3.69 z m -4.12,-0.06 c 0,-1.7 -0.34,-3.05 -1.01,-4.05 -0.67,-1 -1.74,-1.49 -3.2,-1.49 -0.66,0 -1.29,0.1 -1.87,0.3 -0.59,0.2 -1.06,0.42 -1.41,0.66 v 9.98 c 0.29,0.07 0.66,0.13 1.11,0.18 0.45,0.06 1,0.08 1.64,0.08 1.48,0 2.64,-0.5 3.48,-1.51 0.84,-1.01 1.26,-2.38 1.26,-4.15 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path44"
                         d="m 458.07,327.86 c 0,1.37 -0.2,2.62 -0.6,3.75 -0.4,1.13 -0.96,2.09 -1.69,2.88 -0.73,0.79 -1.61,1.42 -2.64,1.86 -1.03,0.44 -2.16,0.66 -3.4,0.66 -1.24,0 -2.37,-0.22 -3.38,-0.66 -1.02,-0.44 -1.89,-1.06 -2.62,-1.86 -0.73,-0.8 -1.3,-1.76 -1.71,-2.88 -0.41,-1.13 -0.61,-2.38 -0.61,-3.75 0,-1.37 0.2,-2.61 0.61,-3.73 0.41,-1.12 0.98,-2.07 1.72,-2.87 0.74,-0.8 1.62,-1.41 2.64,-1.84 1.02,-0.43 2.13,-0.65 3.35,-0.65 1.22,0 2.34,0.22 3.37,0.65 1.03,0.43 1.91,1.04 2.64,1.84 0.73,0.8 1.3,1.75 1.71,2.87 0.4,1.12 0.61,2.36 0.61,3.73 z m -4.11,0 c 0,-1.72 -0.37,-3.09 -1.11,-4.1 -0.74,-1.01 -1.77,-1.51 -3.1,-1.51 -1.33,0 -2.36,0.5 -3.1,1.51 -0.74,1.01 -1.11,2.37 -1.11,4.1 0,1.75 0.37,3.13 1.11,4.14 0.74,1.02 1.77,1.53 3.1,1.53 1.33,0 2.36,-0.51 3.1,-1.53 0.73,-1.01 1.11,-2.39 1.11,-4.14 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path46"
                         d="m 472.09,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path48"
                         d="m 481.35,318.77 c 1.33,0 2.44,0.17 3.35,0.5 0.91,0.33 1.63,0.8 2.17,1.39 0.54,0.59 0.93,1.32 1.16,2.17 0.23,0.85 0.35,1.79 0.35,2.8 v 10.51 c -0.62,0.13 -1.55,0.29 -2.8,0.48 -1.25,0.19 -2.66,0.28 -4.23,0.28 -1.04,0 -1.99,-0.1 -2.85,-0.3 -0.86,-0.2 -1.6,-0.52 -2.21,-0.96 -0.61,-0.44 -1.08,-1.02 -1.43,-1.72 -0.34,-0.71 -0.51,-1.58 -0.51,-2.62 0,-1 0.19,-1.83 0.58,-2.52 0.39,-0.68 0.91,-1.24 1.57,-1.67 0.66,-0.43 1.43,-0.74 2.31,-0.93 0.87,-0.19 1.78,-0.28 2.74,-0.28 0.44,0 0.91,0.03 1.39,0.08 0.49,0.06 1.01,0.15 1.56,0.28 v -0.66 c 0,-0.46 -0.06,-0.91 -0.17,-1.33 -0.11,-0.42 -0.3,-0.79 -0.58,-1.11 -0.28,-0.32 -0.64,-0.57 -1.09,-0.75 -0.45,-0.18 -1.02,-0.27 -1.71,-0.27 -0.93,0 -1.78,0.07 -2.55,0.2 -0.77,0.13 -1.4,0.29 -1.89,0.46 l -0.5,-3.25 c 0.51,-0.18 1.25,-0.35 2.22,-0.53 0.97,-0.18 2.01,-0.25 3.12,-0.25 z m 0.33,14.96 c 1.24,0 2.18,-0.07 2.82,-0.2 v -4.44 c -0.22,-0.07 -0.54,-0.13 -0.96,-0.2 -0.42,-0.07 -0.88,-0.1 -1.39,-0.1 -0.44,0 -0.89,0.03 -1.34,0.1 -0.45,0.07 -0.86,0.19 -1.23,0.37 -0.37,0.18 -0.66,0.43 -0.88,0.75 -0.22,0.32 -0.33,0.72 -0.33,1.21 0,0.95 0.3,1.61 0.9,1.97 0.58,0.36 1.39,0.54 2.41,0.54 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path50"
                         d="m 493.08,314.63 4.01,-0.66 v 5.24 h 6.17 v 3.35 h -6.17 v 7.06 c 0,1.39 0.22,2.39 0.66,2.98 0.44,0.6 1.19,0.9 2.25,0.9 0.73,0 1.38,-0.08 1.94,-0.23 0.56,-0.15 1.01,-0.3 1.34,-0.43 l 0.66,3.18 c -0.46,0.2 -1.07,0.4 -1.82,0.61 -0.75,0.21 -1.64,0.31 -2.65,0.31 -1.24,0 -2.27,-0.17 -3.1,-0.5 -0.83,-0.33 -1.49,-0.81 -1.97,-1.44 -0.48,-0.63 -0.83,-1.39 -1.03,-2.29 -0.2,-0.9 -0.3,-1.92 -0.3,-3.07 v -15.01 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path52"
                         d="m 522.83,327.86 c 0,1.37 -0.2,2.62 -0.6,3.75 -0.4,1.13 -0.96,2.09 -1.69,2.88 -0.73,0.79 -1.61,1.42 -2.64,1.86 -1.03,0.44 -2.16,0.66 -3.4,0.66 -1.24,0 -2.37,-0.22 -3.38,-0.66 -1.02,-0.44 -1.89,-1.06 -2.62,-1.86 -0.73,-0.8 -1.3,-1.76 -1.71,-2.88 -0.41,-1.13 -0.61,-2.38 -0.61,-3.75 0,-1.37 0.2,-2.61 0.61,-3.73 0.41,-1.12 0.98,-2.07 1.72,-2.87 0.74,-0.8 1.62,-1.41 2.64,-1.84 1.02,-0.43 2.13,-0.65 3.35,-0.65 1.22,0 2.34,0.22 3.37,0.65 1.03,0.43 1.91,1.04 2.64,1.84 0.73,0.8 1.3,1.75 1.71,2.87 0.4,1.12 0.61,2.36 0.61,3.73 z m -4.11,0 c 0,-1.72 -0.37,-3.09 -1.11,-4.1 -0.74,-1.01 -1.77,-1.51 -3.1,-1.51 -1.33,0 -2.36,0.5 -3.1,1.51 -0.74,1.01 -1.11,2.37 -1.11,4.1 0,1.75 0.37,3.13 1.11,4.14 0.74,1.02 1.77,1.53 3.1,1.53 1.33,0 2.36,-0.51 3.1,-1.53 0.74,-1.01 1.11,-2.39 1.11,-4.14 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path54"
                         d="m 536.86,322.82 c -0.33,-0.11 -0.79,-0.23 -1.38,-0.35 -0.59,-0.12 -1.27,-0.18 -2.04,-0.18 -0.44,0 -0.91,0.04 -1.41,0.13 -0.5,0.09 -0.85,0.17 -1.04,0.23 v 13.89 h -4.01 v -16.51 c 0.77,-0.29 1.74,-0.56 2.9,-0.81 1.16,-0.25 2.45,-0.38 3.86,-0.38 0.27,0 0.57,0.02 0.93,0.05 0.35,0.03 0.71,0.08 1.06,0.13 0.35,0.06 0.7,0.12 1.03,0.2 0.33,0.08 0.6,0.15 0.8,0.21 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /><path
                         id="path56"
                         d="m 554.5,319.21 c -1.79,6.59 -3.86,12.56 -6.22,17.91 -0.44,1 -0.9,1.85 -1.36,2.55 -0.46,0.71 -0.98,1.29 -1.56,1.76 -0.58,0.46 -1.22,0.8 -1.93,1.01 -0.71,0.21 -1.53,0.32 -2.46,0.32 -0.62,0 -1.23,-0.07 -1.84,-0.2 -0.61,-0.13 -1.07,-0.28 -1.38,-0.43 l 0.73,-3.22 c 0.8,0.31 1.59,0.46 2.37,0.46 1.04,0 1.86,-0.25 2.45,-0.75 0.59,-0.5 1.1,-1.27 1.55,-2.3 -1.27,-2.43 -2.48,-5.08 -3.65,-7.96 -1.17,-2.88 -2.2,-5.92 -3.11,-9.15 h 4.28 c 0.22,0.93 0.49,1.93 0.82,3.02 0.33,1.09 0.67,2.18 1.05,3.3 0.38,1.12 0.78,2.23 1.2,3.33 0.42,1.1 0.84,2.13 1.26,3.08 0.71,-1.97 1.36,-4.06 1.98,-6.28 0.62,-2.22 1.18,-4.37 1.68,-6.45 z"
                         class="st2"
                         inkscape:connector-curvature="0"
                         style="fill:#27a2db" /></g></g><g
                     id="g73"><path
                       id="path62"
                       d="m 115.79,268.35 c 0,0 16.9,14.39 -16.73,50.04 -33.64,35.64 -3.85,60.91 4.85,63.76 0,0 -20.92,-13.56 15.06,-52.38 35.98,-38.83 -3.18,-61.42 -3.18,-61.42 z"
                       class="st2"
                       inkscape:connector-curvature="0"
                       style="fill:#27a2db" /><path
                       id="path64"
                       d="m 96.72,213.13 c 0,0 16.9,14.39 -16.73,50.04 -33.64,35.64 -3.85,60.91 4.85,63.76 0,0 -20.92,-13.55 15.06,-52.38 35.97,-38.83 -3.18,-61.42 -3.18,-61.42 z"
                       class="st2"
                       inkscape:connector-curvature="0"
                       style="fill:#27a2db" /><linearGradient
                       gradientTransform="matrix(-1,0,0,1,233.7066,0)"
                       y2="296.5618"
                       x2="151.9006"
                       y1="296.5618"
                       x1="116.6832"
                       gradientUnits="userSpaceOnUse"
                       id="SVGID_1_"><stop
                         id="stop66"
                         style="stop-color:#F5AA1C"
                         offset="0.25" /><stop
                         id="stop68"
                         style="stop-color:#F15827"
                         offset="1" /></linearGradient><path
                       id="path71"
                       d="m 106.07,272.02 10.95,8.33 c -0.02,1.49 -0.21,3.19 -0.64,5.12 l -13.21,-10.04 c 1.02,-1.14 1.99,-2.28 2.9,-3.41 z m -8.6,9.81 15.85,12.05 c 0.73,-1.49 1.33,-2.9 1.81,-4.23 l -14.72,-11.2 c -1.04,1.15 -2.02,2.28 -2.94,3.38 z m -5.28,6.71 16.82,12.79 c 0.88,-1.32 1.67,-2.59 2.37,-3.81 l -16.5,-12.54 c -0.96,1.23 -1.86,2.41 -2.69,3.56 z m -4.68,7.18 16.44,12.5 c 0.98,-1.21 1.88,-2.39 2.72,-3.54 L 89.86,291.9 c -0.87,1.32 -1.65,2.6 -2.35,3.82 z m -3.76,7.88 14.61,11.1 c 1.05,-1.14 2.04,-2.26 2.98,-3.35 L 85.57,299.36 c -0.72,1.5 -1.32,2.91 -1.82,4.24 z m -1.94,9.25 10.86,8.25 c 0.91,-1.12 1.88,-2.25 2.92,-3.39 L 82.5,307.76 c -0.45,1.9 -0.66,3.59 -0.69,5.09 z"
                       class="st3"
                       inkscape:connector-curvature="0"
                       style="fill:url(#SVGID_1_)" /></g><path
                     id="path75"
                     d="m 137.85,344.01 c 5.97,0 10.83,-4.86 10.83,-10.83 v -75.89 c 0,-5.97 -4.86,-10.83 -10.83,-10.83 h -19.99 c 0.52,-4.48 0.03,-8.54 -1.08,-12.17 h 21.06 c 12.65,0 23,10.35 23,23 v 75.89 c 0,12.65 -10.35,23 -23,23 h -34.13 c 1.49,-3.62 3.68,-7.66 6.78,-12.17 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /><path
                     id="path77"
                     d="m 61.96,234.29 h 34.63 c -1.18,3.56 -3.09,7.61 -5.99,12.17 H 61.96 c -5.97,0 -10.83,4.86 -10.83,10.83 v 75.89 c 0,5.97 4.86,10.83 10.83,10.83 h 19.63 c -0.93,4.37 -0.95,8.44 -0.32,12.17 h -19.3 c -12.65,0 -23,-10.35 -23,-23 v -75.89 c -0.01,-12.65 10.34,-23 22.99,-23 z"
                     class="st1"
                     inkscape:connector-curvature="0"
                     style="fill:#81848a" /></g></svg>


            terminal-icon.svg: |
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="#FFFFFF" d="M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"/></svg>
              <!--
              Font Awesome Free 5.2.0 by @fontawesome - https://fontawesome.com
              License - https://fontawesome.com/license (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
              -->

            rstudio-icon.svg: |
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" width="724" height="561" viewBox="0 0 724 561">
                <defs>
                  <linearGradient id="gradientFill-1" x1="0" x2="1" y1="0" y2="1" gradientUnits="objectBoundingBox" spreadMethod="pad">
                    <stop offset="0" stop-color="rgb(255,255,255)" stop-opacity="1"/>
                    <stop offset="1" stop-color="rgb(255,255,255)" stop-opacity="1"/>
                  </linearGradient>
                  <linearGradient id="gradientFill-2" x1="0" x2="1" y1="0" y2="1" gradientUnits="objectBoundingBox" spreadMethod="pad">
                    <stop offset="0" stop-color="rgb(255,255,255)" stop-opacity="1"/>
                    <stop offset="1" stop-color="rgb(255,255,255)" stop-opacity="1"/>
                  </linearGradient>
                </defs>
                <path d="M361.453,485.937 C162.329,485.937 0.906,377.828 0.906,244.469 C0.906,111.109 162.329,3.000 361.453,3.000 C560.578,3.000 722.000,111.109 722.000,244.469 C722.000,377.828 560.578,485.937 361.453,485.937 ZM416.641,97.406 C265.289,97.406 142.594,171.314 142.594,262.484 C142.594,353.654 265.289,427.562 416.641,427.562 C567.992,427.562 679.687,377.033 679.687,262.484 C679.687,147.971 567.992,97.406 416.641,97.406 Z" fill="url(#gradientFill-1)" fill-rule="evenodd"/>
                <path d="M550.000,377.000 C550.000,377.000 571.822,383.585 584.500,390.000 C588.899,392.226 596.510,396.668 602.000,402.500 C607.378,408.212 610.000,414.000 610.000,414.000 L696.000,559.000 L557.000,559.062 L492.000,437.000 C492.000,437.000 478.690,414.131 470.500,407.500 C463.668,401.969 460.755,400.000 454.000,400.000 C449.298,400.000 420.974,400.000 420.974,400.000 L421.000,558.974 L298.000,559.026 L298.000,152.938 L545.000,152.938 C545.000,152.938 657.500,154.967 657.500,262.000 C657.500,369.033 550.000,377.000 550.000,377.000 ZM496.500,241.024 L422.037,240.976 L422.000,310.026 L496.500,310.002 C496.500,310.002 531.000,309.895 531.000,274.877 C531.000,239.155 496.500,241.024 496.500,241.024 Z" fill="url(#gradientFill-2)" fill-rule="evenodd"/>
              </svg>


            jupyter-icon.svg: |
              <svg width="44" height="51" viewBox="0 0 44 51" version="2.0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:figma="http://www.figma.com/figma/ns">
              <title>Group.svg</title>
              <desc>Created using Figma 0.90</desc>
              <g id="Canvas" transform="translate(-1640 -2453)" figma:type="canvas">
              <g id="Group" style="mix-blend-mode:normal;" figma:type="group">
              <g id="Group" style="mix-blend-mode:normal;" figma:type="group">
              <g id="Group" style="mix-blend-mode:normal;" figma:type="group">
              <g id="g" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path9 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path0_fill" transform="translate(1640.54 2474.36)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path10 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path1_fill" transform="translate(1645.68 2474.37)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path11 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path2_fill" transform="translate(1653.39 2474.26)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path12 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path3_fill" transform="translate(1660.43 2474.39)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path13 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path4_fill" transform="translate(1667.55 2472.54)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path14 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path5_fill" transform="translate(1672.47 2474.29)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path15 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path6_fill" transform="translate(1679.98 2474.24)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              </g>
              </g>
              <g id="g" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path16 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path7_fill" transform="translate(1673.48 2453.69)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path17 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path8_fill" transform="translate(1643.21 2484.27)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path18 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path9_fill" transform="translate(1643.21 2457.88)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path19 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path10_fill" transform="translate(1643.28 2496.09)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              <g id="path" style="mix-blend-mode:normal;" figma:type="group">
              <g id="path20 fill" style="mix-blend-mode:normal;" figma:type="vector">
              <use xlink:href="#path11_fill" transform="translate(1641.87 2458.43)" fill="#FFFFFF" style="mix-blend-mode:normal;"/>
              </g>
              </g>
              </g>
              </g>
              </g>
              </g>
              <defs>
              <path id="path0_fill" d="M 1.74498 5.47533C 1.74498 7.03335 1.62034 7.54082 1.29983 7.91474C 0.943119 8.23595 0.480024 8.41358 0 8.41331L 0.124642 9.3036C 0.86884 9.31366 1.59095 9.05078 2.15452 8.56466C 2.45775 8.19487 2.6834 7.76781 2.818 7.30893C 2.95261 6.85005 2.99341 6.36876 2.93798 5.89377L 2.93798 0L 1.74498 0L 1.74498 5.43972L 1.74498 5.47533Z"/>
              <path id="path1_fill" d="M 5.50204 4.76309C 5.50204 5.43081 5.50204 6.02731 5.55545 6.54368L 4.496 6.54368L 4.42478 5.48423C 4.20318 5.85909 3.88627 6.16858 3.50628 6.38125C 3.12628 6.59392 2.69675 6.70219 2.26135 6.69503C 1.22861 6.69503 0 6.13415 0 3.84608L 0 0.0445149L 1.193 0.0445149L 1.193 3.6057C 1.193 4.84322 1.57583 5.67119 2.65309 5.67119C 2.87472 5.67358 3.09459 5.63168 3.29982 5.54796C 3.50505 5.46424 3.69149 5.34039 3.84822 5.18366C 4.00494 5.02694 4.1288 4.84049 4.21252 4.63527C 4.29623 4.43004 4.33813 4.21016 4.33575 3.98853L 4.33575 0L 5.52874 0L 5.52874 4.72748L 5.50204 4.76309Z"/>
              <path id="path2_fill" d="M 0.0534178 2.27264C 0.0534178 1.44466 0.0534178 0.768036 0 0.153731L 1.06836 0.153731L 1.12177 1.2666C 1.3598 0.864535 1.70247 0.534594 2.11325 0.311954C 2.52404 0.0893145 2.98754 -0.0176786 3.45435 0.00238095C 5.03908 0.00238095 6.23208 1.32892 6.23208 3.30538C 6.23208 5.63796 4.7987 6.79535 3.24958 6.79535C 2.85309 6.81304 2.45874 6.7281 2.10469 6.54874C 1.75064 6.36937 1.44888 6.10166 1.22861 5.77151L 1.22861 5.77151L 1.22861 9.33269L 0.0534178 9.33269L 0.0534178 2.29935L 0.0534178 2.27264ZM 1.22861 4.00872C 1.23184 4.17026 1.24972 4.33117 1.28203 4.48948C 1.38304 4.88479 1.61299 5.23513 1.93548 5.48506C 2.25798 5.735 2.65461 5.87026 3.06262 5.86944C 4.31794 5.86944 5.05689 4.8456 5.05689 3.3588C 5.05689 2.05897 4.36246 0.946096 3.10714 0.946096C 2.61036 0.986777 2.14548 1.20726 1.79965 1.5662C 1.45382 1.92514 1.25079 2.3979 1.22861 2.89585L 1.22861 4.00872Z"/>
              <path id="path3_fill" d="M 1.31764 0.0178059L 2.75102 3.85499C 2.90237 4.28233 3.06262 4.7987 3.16946 5.18153C 3.2941 4.7898 3.42764 4.29123 3.5879 3.82828L 4.88773 0.0178059L 6.14305 0.0178059L 4.36246 4.64735C 3.47216 6.87309 2.92908 8.02158 2.11 8.71601C 1.69745 9.09283 1.19448 9.35658 0.649917 9.48166L 0.356119 8.48453C 0.736886 8.35942 1.09038 8.16304 1.39777 7.90584C 1.8321 7.55188 2.17678 7.10044 2.4038 6.5882C 2.45239 6.49949 2.48551 6.40314 2.50173 6.3033C 2.49161 6.19586 2.46457 6.0907 2.42161 5.9917L 0 0L 1.29983 0L 1.31764 0.0178059Z"/>
              <path id="path4_fill" d="M 2.19013 0L 2.19013 1.86962L 3.8995 1.86962L 3.8995 2.75992L 2.19013 2.75992L 2.19013 6.26769C 2.19013 7.06896 2.42161 7.53191 3.08043 7.53191C 3.31442 7.53574 3.54789 7.5088 3.77486 7.45179L 3.82828 8.34208C 3.48794 8.45999 3.12881 8.51431 2.76882 8.50234C 2.53042 8.51726 2.29161 8.48043 2.06878 8.39437C 1.84595 8.30831 1.64438 8.17506 1.47789 8.00377C 1.11525 7.51873 0.949826 6.91431 1.01494 6.31221L 1.01494 2.75102L 0 2.75102L 0 1.86072L 1.03274 1.86072L 1.03274 0.275992L 2.19013 0Z"/>
              <path id="path5_fill" d="M 1.17716 3.57899C 1.153 3.88093 1.19468 4.18451 1.29933 4.46876C 1.40398 4.75301 1.5691 5.01114 1.78329 5.22532C 1.99747 5.43951 2.2556 5.60463 2.53985 5.70928C 2.8241 5.81393 3.12768 5.85561 3.42962 5.83145C 4.04033 5.84511 4.64706 5.72983 5.21021 5.49313L 5.41498 6.38343C 4.72393 6.66809 3.98085 6.80458 3.23375 6.78406C 2.79821 6.81388 2.36138 6.74914 1.95322 6.59427C 1.54505 6.43941 1.17522 6.19809 0.869071 5.88688C 0.562928 5.57566 0.327723 5.2019 0.179591 4.79125C 0.0314584 4.38059 -0.0260962 3.94276 0.0108748 3.50777C 0.0108748 1.54912 1.17716 0 3.0824 0C 5.21911 0 5.75329 1.86962 5.75329 3.06262C 5.76471 3.24644 5.76471 3.43079 5.75329 3.61461L 1.15046 3.61461L 1.17716 3.57899ZM 4.66713 2.6887C 4.70149 2.45067 4.68443 2.20805 4.61709 1.97718C 4.54976 1.74631 4.43372 1.53255 4.2768 1.35031C 4.11987 1.16808 3.92571 1.0216 3.70739 0.920744C 3.48907 0.81989 3.25166 0.767006 3.01118 0.765656C 2.52201 0.801064 2.06371 1.01788 1.72609 1.37362C 1.38847 1.72935 1.19588 2.19835 1.18607 2.6887L 4.66713 2.6887Z"/>
              <path id="path6_fill" d="M 0.0534178 2.19228C 0.0534178 1.42663 0.0534178 0.767806 0 0.162404L 1.06836 0.162404L 1.06836 1.43553L 1.12177 1.43553C 1.23391 1.04259 1.4656 0.694314 1.78468 0.439049C 2.10376 0.183783 2.4944 0.034196 2.90237 0.0110538C 3.01466 -0.00368459 3.12839 -0.00368459 3.24068 0.0110538L 3.24068 1.12393C 3.10462 1.10817 2.9672 1.10817 2.83114 1.12393C 2.427 1.13958 2.04237 1.30182 1.7491 1.58035C 1.45583 1.85887 1.27398 2.23462 1.23751 2.63743C 1.20422 2.8196 1.18635 3.00425 1.1841 3.18941L 1.1841 6.65267L 0.00890297 6.65267L 0.00890297 2.20118L 0.0534178 2.19228Z"/>
              <path id="path7_fill" d="M 6.03059 2.83565C 6.06715 3.43376 5.92485 4.02921 5.6218 4.54615C 5.31875 5.0631 4.86869 5.47813 4.32893 5.73839C 3.78917 5.99864 3.18416 6.09233 2.59097 6.00753C 1.99778 5.92272 1.44326 5.66326 0.998048 5.26219C 0.552837 4.86113 0.23709 4.33661 0.0910307 3.75546C -0.0550287 3.17431 -0.0247891 2.56283 0.177897 1.99893C 0.380583 1.43503 0.746541 0.944221 1.22915 0.589037C 1.71176 0.233853 2.28918 0.0303686 2.88784 0.00450543C 3.28035 -0.0170932 3.67326 0.0391144 4.04396 0.169896C 4.41467 0.300677 4.75587 0.503453 5.04794 0.766561C 5.34 1.02967 5.57718 1.34792 5.74582 1.70301C 5.91446 2.0581 6.01124 2.44303 6.03059 2.83565L 6.03059 2.83565Z"/>
              <path id="path8_fill" d="M 18.6962 7.12238C 10.6836 7.12238 3.64131 4.24672 0 0C 1.41284 3.82041 3.96215 7.1163 7.30479 9.44404C 10.6474 11.7718 14.623 13.0196 18.6962 13.0196C 22.7695 13.0196 26.745 11.7718 30.0877 9.44404C 33.4303 7.1163 35.9796 3.82041 37.3925 4.0486e-13C 33.7601 4.24672 26.7445 7.12238 18.6962 7.12238Z"/>
              <path id="path9_fill" d="M 18.6962 5.89725C 26.7089 5.89725 33.7512 8.77291 37.3925 13.0196C 35.9796 9.19922 33.4303 5.90333 30.0877 3.57559C 26.745 1.24785 22.7695 4.0486e-13 18.6962 0C 14.623 4.0486e-13 10.6474 1.24785 7.30479 3.57559C 3.96215 5.90333 1.41284 9.19922 0 13.0196C 3.64131 8.76401 10.648 5.89725 18.6962 5.89725Z"/>
              <path id="path10_fill" d="M 7.59576 3.56656C 7.64276 4.31992 7.46442 5.07022 7.08347 5.72186C 6.70251 6.3735 6.13619 6.89698 5.45666 7.22561C 4.77713 7.55424 4.01515 7.67314 3.26781 7.56716C 2.52046 7.46117 1.82158 7.13511 1.26021 6.63051C 0.698839 6.12591 0.300394 5.46561 0.115637 4.73375C -0.0691191 4.00188 -0.0318219 3.23159 0.222777 2.52099C 0.477376 1.8104 0.93775 1.19169 1.54524 0.743685C 2.15274 0.295678 2.87985 0.0386595 3.63394 0.00537589C 4.12793 -0.0210471 4.62229 0.0501173 5.08878 0.214803C 5.55526 0.37949 5.98473 0.63447 6.35264 0.965179C 6.72055 1.29589 7.01971 1.69584 7.233 2.1422C 7.4463 2.58855 7.56957 3.07256 7.59576 3.56656L 7.59576 3.56656Z"/>
              <path id="path11_fill" d="M 2.25061 4.37943C 1.81886 4.39135 1.39322 4.27535 1.02722 4.04602C 0.661224 3.81668 0.371206 3.48424 0.193641 3.09052C 0.0160762 2.69679 -0.0411078 2.25935 0.0292804 1.83321C 0.0996686 1.40707 0.294486 1.01125 0.589233 0.695542C 0.883981 0.37983 1.2655 0.158316 1.68581 0.0588577C 2.10611 -0.0406005 2.54644 -0.0135622 2.95143 0.136572C 3.35641 0.286707 3.70796 0.553234 3.96186 0.902636C 4.21577 1.25204 4.3607 1.66872 4.37842 2.10027C 4.39529 2.6838 4.18131 3.25044 3.78293 3.67715C 3.38455 4.10387 2.83392 4.35623 2.25061 4.37943Z"/>
              </defs>
              </svg>


            galaxy-icon.svg: |
              <?xml version="1.0" encoding="UTF-8" standalone="no"?>
              <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
              <svg width="100%" height="100%" viewBox="0 0 207 238" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                  <g transform="matrix(1,0,0,1,-1.775,-30.9417)">
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <path d="M36.5,18.227L1.25,18.227C0.801,18.227 0.426,17.852 0.426,17.398L0.426,8.25C0.426,7.801 0.801,7.426 1.25,7.426L36.5,7.426C36.949,7.426 37.324,7.801 37.324,8.25L37.324,17.324C37.324,17.773 37.023,18.227 36.5,18.227Z" style="fill:white;fill-rule:nonzero;"/>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <path d="M27.051,32.398L1.324,32.398C0.875,32.398 0.426,32.023 0.426,31.5L0.426,22.5C0.426,22.051 0.801,21.602 1.324,21.602L27.051,21.602C27.5,21.602 27.949,21.977 27.949,22.5L27.949,31.5C27.949,32.023 27.574,32.398 27.051,32.398Z" style="fill:white;fill-rule:nonzero;"/>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <path d="M97.625,40.949C95.75,41.625 93.352,42.375 90.352,43.051C87.273,43.727 84.273,44.102 81.273,44.102C74.301,44.102 68.824,42.227 64.852,38.398C60.875,34.574 58.926,29.324 58.926,22.648C58.926,16.273 60.949,11.102 64.926,7.199C68.898,3.301 74.523,1.352 81.648,1.352C84.352,1.352 86.898,1.574 89.375,2.102C91.852,2.551 94.551,3.523 97.551,5.023L97.551,14.625L96.352,14.625C95.824,14.25 95.074,13.727 94.102,12.977C93.125,12.227 92.148,11.625 91.25,11.176C90.199,10.574 88.926,10.051 87.5,9.676C86.074,9.227 84.574,9 82.926,9C81.051,9 79.324,9.301 77.824,9.824C76.324,10.352 74.898,11.25 73.699,12.375C72.5,13.5 71.602,14.926 70.926,16.574C70.25,18.301 69.949,20.25 69.949,22.426C69.949,27 71.148,30.449 73.551,32.852C75.949,35.25 79.551,36.449 84.273,36.449L85.625,36.449C86.074,36.449 86.523,36.449 86.977,36.375L86.977,28.352L78.801,28.352L78.801,20.625L97.773,20.625L97.625,40.949Z" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <path d="M122.75,40.051C122.227,40.5 121.551,40.949 120.727,41.477C119.977,42.074 119.148,42.523 118.477,42.824C117.5,43.273 116.449,43.574 115.398,43.801C114.352,44.023 113.227,44.102 111.949,44.102C109.023,44.102 106.551,43.199 104.523,41.324C102.5,39.523 101.523,37.199 101.523,34.352C101.523,32.102 102.051,30.227 103.023,28.801C104,27.375 105.5,26.25 107.301,25.426C109.102,24.603 111.426,24 114.125,23.625C116.824,23.25 119.676,23.023 122.602,22.875L122.602,22.727C122.602,21 121.926,19.801 120.5,19.199C119.074,18.523 117.051,18.227 114.352,18.227C112.699,18.227 110.977,18.523 109.102,19.125C107.227,19.727 105.875,20.176 105.125,20.477L104.227,20.477L104.227,12.977C105.273,12.676 107,12.375 109.398,12C111.727,11.625 114.125,11.398 116.523,11.398C122.148,11.398 126.273,12.301 128.75,14.023C131.227,15.75 132.5,18.449 132.5,22.199L132.5,43.273L122.676,43.273L122.75,40.051ZM122.75,35.176L122.75,28.801C121.398,28.875 119.977,29.023 118.398,29.25C116.824,29.477 115.625,29.699 114.875,29.926C113.898,30.227 113.148,30.676 112.625,31.273C112.102,31.875 111.875,32.699 111.875,33.602C111.875,34.273 111.949,34.801 112.023,35.176C112.102,35.625 112.398,35.926 112.852,36.375C113.301,36.75 113.75,37.051 114.352,37.199C114.949,37.352 115.852,37.426 117.125,37.426C118.102,37.426 119.148,37.199 120.199,36.824C121.102,36.375 122,35.852 122.75,35.176Z" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <rect x="139.25" y="0.301" width="9.977" height="42.973" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <path d="M174.801,40.051C174.273,40.5 173.602,40.949 172.773,41.477C172.023,42.074 171.199,42.523 170.523,42.824C169.551,43.273 168.5,43.574 167.449,43.801C166.398,44.023 165.273,44.102 164,44.102C161.074,44.102 158.602,43.199 156.574,41.324C154.551,39.523 153.574,37.199 153.574,34.352C153.574,32.102 154.102,30.227 155.074,28.801C156.051,27.375 157.551,26.25 159.352,25.426C161.227,24.603 163.477,24 166.176,23.625C168.875,23.25 171.727,23.023 174.648,22.875L174.648,22.727C174.648,21 173.977,19.801 172.551,19.199C171.125,18.523 169.102,18.227 166.398,18.227C164.75,18.227 163.023,18.523 161.148,19.125C159.273,19.727 157.926,20.176 157.176,20.477L156.273,20.477L156.273,12.977C157.324,12.676 159.051,12.375 161.449,12C163.773,11.625 166.176,11.398 168.574,11.398C174.199,11.398 178.324,12.301 180.801,14.023C183.352,15.75 184.551,18.449 184.551,22.199L184.551,43.273L174.727,43.273L174.801,40.051ZM174.801,35.176L174.801,28.801C173.449,28.875 172.023,29.023 170.449,29.25C168.875,29.477 167.676,29.699 166.926,29.926C165.949,30.227 165.199,30.676 164.676,31.273C164.148,31.875 163.926,32.699 163.926,33.602C163.926,34.273 164,34.801 164.074,35.176C164.148,35.625 164.449,35.926 164.898,36.375C165.352,36.75 165.801,37.051 166.398,37.199C167,37.352 167.898,37.426 169.176,37.426C170.148,37.426 171.199,37.199 172.25,36.824C173.148,36.375 174.051,35.852 174.801,35.176Z" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <path d="M223.699,43.273L212.074,43.273L205.477,34.051L198.648,43.352L187.25,43.352L199.477,27.824L187.477,12.301L199.102,12.301L205.625,21.449L212.148,12.301L223.551,12.301L211.477,27.602L223.699,43.273Z" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.245612,0,0,0.245612,-13.3246,51.0487)">
                              <path d="M240.574,32.324L247.625,12.301L257.824,12.301L240.574,54.676L229.773,54.676L234.727,43.051L222.727,12.301L233.148,12.301L240.574,32.324Z" style="fill:white;fill-rule:nonzero;"/>
                          </g>
                      </g>
                      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
                          <g transform="matrix(0.24,0,0,0.24002,13,35)">
                              <clipPath id="_clip1">
                                  <rect x="0" y="0" width="154.167" height="49.996"/>
                              </clipPath>
                              <g clip-path="url(#_clip1)">
                                  <clipPath id="_clip2">
                                      <rect x="0" y="0" width="154.167" height="49.996"/>
                                  </clipPath>
                                  <g clip-path="url(#_clip2)">
                                      <g transform="matrix(1,-0,-0,0.999917,-52.3917,-114.882)">
                                          <use xlink:href="#_Image3" x="52.675" y="114.892" width="154.167px" height="50px" transform="matrix(0.994624,0,0,1,0,0)"/>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
                  <defs>
                      <image id="_Image3" width="155px" height="50px" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAAAyCAYAAABLcqmqAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACZ0lEQVR4nO3dvYoUQRSG4e8cF0HESDBRTL0KL8Yb8Aq8G+/B0MDMVDAXDDTYZf1ZRVhnj0HXX/e0uq7MGXTeB5ZuaqqrTlV/DLNRWUSEgAS+7wJwOI6mS+j0/TOdnb7UxebLjqaydjV3RUhmJsllZoqY2hWSzGTy6ZHWbgozuVxhZRzzPmYZq9+XPzOZTPGLPvV+7GPl2WWf5Vxt/HKVmRT92vqayudjzXUf/Ddz1TGWa9nus2wP2WIt232WeyXr70Q2f96G9Zl8WndIcpeFTR/VWs177ZKOIjZ68+qxPp280PSmd6UW62XDazE+vBBXfyG9vRVt3hYy3l/6maF9rY4e8qvWMR8zhpeyHLPPe7Vaxvat9a3U8sdjrqy1hqt9QQxz6KKvKxRTX0XpK0kuP377NCFou/Iv1iwdZt0h/3j8/C8HAS7Hz7+923cNOBD8N4o0hA1pCBvSEDakIWxIQ9iQhrAhDWFDGsKGNIQNaQgb0hA2pCFsSEPYkIawIQ1hQxrChjSEDWkIG9IQNqQhbEhD2JCGsCENYUMawoY0hA1pCBvSEDakIWxIQ9iQhrAhDWFDGsKGNIQNaQgb0hA2pHHyhix+/cbdfdeAA+F37j8S327I4LduP9S9B0/k127uu5b/CmcdVsM5WfUIyM35B339/Fqb72fa3Ykv5fCudkia9U8W7aF6sFg9mKucmza1LtqnA8Fac1g5L6nP0Q5js16LLtNHffw6b7sf+mhYjw1j1p2cr3c+57g/43g22wcNh8gt96fOr588a8OzmrVvvwsre7jWPvVfG2e9tsVaOW8UWfixhjQ/AA2ogrkxGkWvAAAAAElFTkSuQmCC"/>
                  </defs>
              </svg>

    galaxy:
      repo: cloudve
      chart: galaxy
      display_name: Galaxy
      summary: |
        Perform repeatable, interactive analysis using a graphical tool interface, choosing from popular
        tools and workflows, aided by online training material and collaboration.
      description: |
        <a href="https://galaxyproject.org/">Galaxy</a> is an open, web-based platform for
        accessible, reproducible, and transparent computational biomedical research. Perform repeatable, interactive
        analysis using a graphical tool interface, choosing from popular tools and workflows, aided by online training
        material and collaboration.
      maintainers: Galaxy Team
      info_url: https://galaxyproject.org/
      icon_url: https://galaxyproject.org/images/galaxy-logos/galaxy_project_logo_square.png
      screenshot_url: assets/images/screenshot_galaxy.png
      context:
        oidc_client_secret: '{{ .Values.oidc_clients.galaxy.client_secret }}'
        oidc_client_id: '{{ .Values.oidc_clients.galaxy.client_id }}'
        domain: '{{ .Values.global.domain }}'
        influxdb_url: '{{ include "cloudman.influxdb_url_cluster" . }}'
        influxdb_database: '{{ include "cloudman.influxdb_database" . }}'
        influxdb_username: '{{ .Values.influxdb.setDefaultUser.username }}'
        influxdb_password: '{{ .Values.influxdb.setDefaultUser.password }}'
        admin_users: cloudman@someplace.org
      template: |
        configs:
          oidc_config.xml: |
            <?xml version="1.0"?>
            <OIDC>
                <Setter Property="VERIFY_SSL" Value="False" Type="bool"/>
                <Setter Property="REQUESTS_TIMEOUT" Value="3600" Type="float"/>
                <Setter Property="ID_TOKEN_MAX_AGE" Value="3600" Type="float"/>
            </OIDC>
          oidc_backends_config.xml: |
            <?xml version="1.0"?>
            <OIDC>
                <provider name="custos">
                    <url>https://{{context.domain}}/auth</url>
                    <client_id>{{context.oidc_client_id}}</client_id>
                    <client_secret>{{context.oidc_client_secret}}</client_secret>
                    <redirect_uri>https://{{context.domain}}{{context.project.access_path}}/galaxy/authnz/custos/callback</redirect_uri>
                    <enable_idp_logout>true</enable_idp_logout>
                    <realm>master</realm>
                </provider>
            </OIDC>
          auth_conf.xml: |
              <auth>
              </auth>
          galaxy.yml:
            galaxy:
              library_import_dir: /gvl
              user_library_import_dir: /gvl
              admin_users: {{context.admin_users}}
              allow_path_paste: true
              enable_oidc: true
              oidc_config_file: /galaxy/server/config/oidc_config.xml
              oidc_backends_config_file: /galaxy/server/config/oidc_backends_config.xml
              auth_config_file: /galaxy/server/config/auth_conf.xml
              require_login: true
              session_duration: 30
        image:
          repository: galaxy/galaxy-k8s
          tag: 20.01
        persistence:
          storageClass: nfs
        postgresql:
          postgresqlPassword: "{{ random_alphanumeric(10) }}"
          postgresqlPostgresPassword: "{{ random_alphanumeric(10) }}"
          persistence:
            storageClass: ebs
        ingress:
          enabled: true
          annotations:
             kubernetes.io/tls-acme: "true"
             cert-manager.io/cluster-issuer: letsencrypt-prod
             nginx.ingress.kubernetes.io/secure-backends: "true"
          hosts:
            - ~
            {%- if not (context.domain | ipaddr) %}
            - "{{ context.domain }}"
            {%- endif %}
          tls:
             - secretName: "{{context.domain | replace('.', '-') }}-key"
               hosts:
                 - "{{context.domain}}"
          path: {{context.project.access_path}}/galaxy

        extraVolumes:
          - name: project-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-project-data-pvc"
          - name: public-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-public-data-pvc"

        extraVolumeMounts:
          - name: project-data
            mountPath: /gvl/projects/current
          - name: public-data
            mountPath: /gvl/public

        influxdb:
          enabled: true
          url: "{{context.influxdb_url}}"
          username: "{{context.influxdb_username}}"
          password: "{{context.influxdb_password}}"

    jupyter:
      repo: jupyterhub
      chart: jupyterhub
      display_name: Jupyter
      summary: Mix code with text in an interactive shell using Python and Markdown.
      description: |
        <a href="https://jupyter.org/">JupyterHub</a> can be used to access your personal
        <a href="http://ipython.org/notebook.html">IPython Notebook</a>.
        IPython Notebook is a web-based interactive computational environment where you can
        combine code execution, text, mathematics, plots and rich media into a single document.
      maintainers: JupyterHub
      info_url: https://jupyter.org/
      icon_url: https://jupyter.org/assets/hublogo.svg
      screenshot_url: assets/images/screenshot_jupyter.png
      context:
        oidc_client_id: '{{ .Values.oidc_clients.jupyterhub.client_id }}'
        oidc_client_secret: '{{ .Values.oidc_clients.jupyterhub.client_secret }}'
        domain: '{{ .Values.global.domain }}'
      template: |
        ingress:
          access_path: "{{context.project.access_path}}/jupyterhub/oauth_login"
          enabled: true
          path: "{{ context.project.access_path}}/jupyterhub"
          hosts:
            - ~
            {%- if not (context.domain | ipaddr) %}
            - "{{ context.domain }}"
            {%- endif %}

        auth:
          type: custom
          custom:
            className: oauthenticator.generic.GenericOAuthenticator
            config:
              login_service: "keycloak"
              client_id: "{{context.oidc_client_id}}"
              client_secret: "{{context.oidc_client_secret}}"
              token_url: "https://{{context.domain}}/auth/realms/master/protocol/openid-connect/token"
              userdata_url: "https://{{context.domain}}/auth/realms/master/protocol/openid-connect/userinfo"
              userdata_method: GET
              username_key: preferred_username

        hub:
          baseUrl: "{{context.project.access_path}}/jupyterhub"
          extraEnv:
            - name: OAUTH2_AUTHORIZE_URL
              value: "https://{{context.domain}}/auth/realms/master/protocol/openid-connect/auth"
            - name: OAUTH2_TOKEN_URL
              value: "https://{{context.domain}}/auth/realms/master/protocol/openid-connect/token"
            - name: OAUTH_CALLBACK_URL
              value: "https://{{context.domain}}{{context.project.access_path}}/jupyterhub/hub/oauth_callback"

        proxy:
          secretToken: "{{random_alphanumeric(65)}}"

        singleuser:
          storage:
            type: dynamic
            dynamic:
              storageClass: nfs
              accessMode: ["ReadWriteMany"]
              size: 10Gi
            extraVolumes:
              - name: notebook-conf
                configMap:
                  name: {{context.project.namespace}}-projman-configs
                  items:
                    - key: "jupyter_notebook_config.py"
                      path: "jupyter_notebook_config.py"
              - name: project-data
                persistentVolumeClaim:
                  claimName: "{{context.project.namespace}}-project-data-pvc"
              - name: public-data
                persistentVolumeClaim:
                  claimName: "{{context.project.namespace}}-public-data-pvc"

            extraVolumeMounts:
              - name: public-data
                mountPath: "/gvl/public"
              - name: project-data
                mountPath: "/gvl/projects/current"
              - name: notebook-conf
                mountPath: /etc/jupyter/

    rstudio:
      repo: cloudve
      chart: rstudio
      display_name: RStudio
      summary: |
        Use advanced statistical and visualization packages from Bioconductor through a powerful RStudio interface.
      description: |
        <a href="https://rstudio.com//">RStudio</a> can be used to access your personal
        RStudio environment. Use advanced statistical and visualization packages from Bioconductor through the powerful
        RStudio interface.
      maintainers: RStudio Inc.
      info_url: https://rstudio.com/
      icon_url: https://www.r-project.org/Rlogo.png
      screenshot_url: assets/images/screenshot_rstudio.png
      context:
        starting_dir: "/gvl"
        domain: '{{ .Values.global.domain }}'
      template: |
        ingress:
          access_path: "{{context.project.access_path}}/rstudio/"
          hosts:
            - host: ~
              paths:
                - {{context.project.access_path}}/rstudio(/|$)(.*)
            {%- if not (context.domain | ipaddr) %}
            - host: {{context.domain}}
              paths:
                - {{context.project.access_path}}/rstudio(/|$)(.*)
            {%- endif %}

        extraVolumes:
          - name: rstudio-conf
            configMap:
              name: {{context.project.namespace}}-projman-configs
              items:
                - key: "rserver.conf"
                  path: "rserver.conf"
          - name: project-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-project-data-pvc"
          - name: public-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-public-data-pvc"

        extraVolumeMounts:
          - name: public-data
            mountPath: "/gvl/public"
          - name: project-data
            mountPath: "/gvl/projects/current"
          - name: rstudio-conf
            mountPath: /etc/rstudio

        persistence:
          storageClass: nfs
          size: 10Gi

        mutableConfigs:
          - fileName: user-settings
            contents: |+
              initialWorkingDirectory={{context.starting_dir}}

            subPath: ".rstudio/monitored/user-settings/"

    terminalman:
      repo: cloudve
      chart: terminalman
      display_name: Project Terminal
      summary: TerminalMan brings the power of a terminal to users
      maintainers: Gnu Project
      info_url: https://www.gnu.org/software/bash/
      icon_url: https://upload.wikimedia.org/wikipedia/commons/8/82/Gnu-bash-logo.svg
      screenshot_url: assets/images/screenshot_terminal.png
      context:
        oidc_client_id: '{{ .Values.oidc_clients.terminalman.client_id }}'
        oidc_client_secret: '{{ .Values.oidc_clients.terminalman.client_secret }}'
        domain: '{{ .Values.global.domain }}'
        starting_dir: "/gvl"
      template: |
        oidc:
          client_id: "{{context.oidc_client_id}}"
          client_secret: {{context.oidc_client_secret}}
          discovery_url: https://{{context.domain}}/auth/realms/master
        ingress:
          access_path: {{context.project.access_path}}/terminalman/
          hosts:
            - host: ~
              paths:
                - {{context.project.access_path}}/terminalman
            {%- if not (context.domain | ipaddr) %}
            - host: {{context.domain}}
              paths:
                - {{context.project.access_path}}/terminalman
            {%- endif %}

        proxyinjector:
          nameOverride: {{context.project.namespace}}-terminalman-proxy

        persistence:
          enabled: false

        extraVolumes:
          - name: project-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-project-data-pvc"
          - name: public-data
            persistentVolumeClaim:
              claimName: "{{context.project.namespace}}-public-data-pvc"

        extraVolumeMounts:
          - name: public-data
            mountPath: "/gvl/public"
          - name: project-data
            mountPath: "/gvl/projects/current"

        initialWorkingDir: "{{context.starting_dir}}"

# CloudMan bootstrap data
cm_initial_cluster_data:
rancher_url:
rancher_api_key:
rancher_cluster_id:
rancher_project_id:

# Special global values which are accessible from all charts
global:
    domain: 192.168.99.100

oidc_clients:
  galaxy:
    client_id: 'galaxy-auth'
    # The client secret is required if the client is not public
    public_client: false
    #client_secret: 'cf84xfps-npm5-hvmb-ntui4grybqrh'
    redirect_uris:
      - '{{ include "cloudman.root_url" . }}/*'
  terminalman:
    client_id: 'terminalman'
    #client_secret:
    redirect_uris:
      - '{{ include "cloudman.root_url" . }}/*'
  jupyterhub:
    client_id: 'jupyterhub'
    #client_secret:
    redirect_uris:
      - '{{ include "cloudman.root_url" . }}/*'
  nextcloud:
    client_id: 'nextcloud'
    #client_secret:
    redirect_uris:
      - '{{ include "cloudman.root_url" . }}/*'

cloudlaunch:
  nameOverride: cloudman
  container_name: cloudman-ui
  image:
    repository: cloudve/cloudman-ui
    tag: latest

  ingress:
    enabled: true
    annotations: {}
      # kubernetes.io/ingress.class: nginx
    path: /
    hosts:
      - ~
    tls: []

  cloudlaunchserver:
    nameOverride: cloudman
    container_name: cloudman-server
    rbac:
      serviceAccount: '{{ include "cloudman.fullname" . }}-cm-svc-account'
    image:
      repository: cloudve/cloudman-server
      tag: latest
    env_prefix: CLOUDMAN
    celery_app_name: cloudman
    django_settings_module: cloudman.settings
    django_dir: /app/cloudman
    initial_data: []
    extra_init_scripts:
      load_bootstrap.sh: |
        #!/bin/sh
        sh /app/secrets/bootstrap.sh
    extra_config_mounts:
      - name: cloudman-extra-config
        mount_path: /opt/cloudman/
        config_name: '{{ template "cloudman.fullname" . }}-cm-init-config'
        read_only: true
    extra_secret_mounts:
      - name: cloudman-bootstrap
        mount_path: /app/secrets
        secret_name: '{{ template "cloudman.fullname" . }}-secret'
        read_only: true
    extraInitContainers:
      - name: post-install-job
        image: "gempesaw/curl-jq"
        command: ["/bin/sh", "/kc-init/update_keycloak.sh"]
        volumeMounts:
          - name: kc-init
            mountPath: /kc-init
            readOnly: true
        env:
          - name: OIDC_CLIENT_ID
            value: "cloudman"
          - name: KEYCLOAK_HTTP_PASSWORD
            valueFrom:
              secretKeyRef:
                name: "{{ .Release.Name }}-keycloak-http"
                key: password
    # TODO: include release name in configmap name
    extraVolumes: |
      - name: kubeconfig
        emptyDir: {}
      - name: kc-init
        configMap:
          name: kc-init-script
    extraVolumeMounts: |
      - name: kubeconfig
        mountPath: /home/cloudman
    extra_env:
      - name: OIDC_ENABLED
        value: "True"
      - name: OIDC_AUTH_URI
        value: "{{.Values.ingress.protocol}}://{{.Values.global.domain | default (index .Values.ingress.hosts 0)}}/auth/realms/master"
      - name: OIDC_CLIENT_ID
        value: "cloudman"
      - name: OIDC_PUBLIC_URI
        value: "{{.Values.ingress.protocol}}://{{.Values.global.domain | default (index .Values.ingress.hosts 0)}}/cloudman"
    postgresql:
      enabled: true
      postgresqlDatabase: cloudman
      postgresqlUsername: cloudman
      # The cloudman user password will be autogenerated by cloudlaunchserver chart if not specified
      # postgresqlPassword: some_pass
      # The postgres superuser password will not be set if not specified. If you need a postgres superuser,
      # this should be set at launch (eg: for access to manually modify databases on the running server)
      # postgresqlPostgresPassword: admin_pass
      initdbScriptsSecret: "{{ .Release.Name }}-keycloak-initdb"
      extraEnv:
      - name: KEYCLOAK_DB_PASSWORD
        valueFrom:
          secretKeyRef:
            name: "{{ .Release.Name }}-postgres-keycloak-password"
            key: postgres-keycloak-password
    ingress:
      enabled: true
      path: /cloudman
      hosts:
        - ~
      protocol: https

keycloak:
  userRegistration:
    enabled: false
  keycloak:
    username: admin
    # password: changeMe
    existingSecret: "{{ .Release.Name }}-keycloak-http"
    existingSecretKey: password
    ingress:
      enabled: true
      # Add a null host to default to IP
      hosts:
        - ~
      path: /auth
    persistence:
      deployPostgres: false
      dbVendor: postgres
      dbName: keycloak
      dbPort: 5432
      dbUser: keycloak
      # Will randomly generate if not specified
      # dbPassword: changeMe
      existingSecret: "{{ .Release.Name }}-postgres-keycloak-password"
      existingSecretKey: postgres-keycloak-password
    # Specifying address directly through extraEnv since `dbHost` is not run through tpl
    extraEnv: |
      - name: DB_ADDR
        value: "{{ .Release.Name }}-postgresql"
      - name: PROXY_ADDRESS_FORWARDING
        value: "true"
    extraVolumes: |
      - name: theme
        emptyDir: {}

    extraVolumeMounts: |
      - name: theme
        mountPath: /opt/jboss/keycloak/themes/keycloak

    extraInitContainers: |
      - name: theme-provider
        image: cloudve/gvl-keycloak-theme:latest
        imagePullPolicy: IfNotPresent
        command:
          - sh
        args:
          - -c
          - |
            echo "Copying theme..."
            cp -R /customtheme/* /theme
            echo "done."
        volumeMounts:
          - name: theme
            mountPath: /theme

prometheus:
  grafana:
    # adminPassword: "changeme"
    sidecar:
      dashboards:
        searchNamespace: "ALL"
    grafana.ini:
      server:
        root_url: "https://{{ .Values.global.domain }}/grafana"
        serve_from_sub_path: true
      auth.generic_oauth:
        enabled: true
        client_id: cloudman
        auth_url: "https://{{ .Values.global.domain }}/auth/realms/master/protocol/openid-connect/auth"
        token_url: "https://{{ .Values.global.domain }}/auth/realms/master/protocol/openid-connect/token"
        api_url: "https://{{ .Values.global.domain }}/auth/realms/master/protocol/openid-connect/userinfo"
        tls_skip_verify_insecure: true
        allow_sign_up: true
      auth:
        oauth_auto_login: true
        disable_login_form: true
        disable_signout_menu: true
      auth.anonymous:
        enabled: false
      security:
        allow_embedding: true
    ingress:
      enabled: true
      path: /grafana
      hosts:
        - ~
  prometheus:
    prometheusSpec:
      ruleSelector:
        matchLabels:
          release: "cloudman"
  alertmanager:
    tplConfig: true
    config:
      global:
        resolve_timeout: 5m
        http_config:
          basic_auth:
            username: autoscaleuser
            # password: changemetoarandomvalue
      receivers:
        - name: 'scaleup'
          webhook_configs:
            - url: http://{{ .Release.Name }}-cloudlaunchserver:8000/cloudman/api/v1/clusters/1/signals/scaleup/
              send_resolved: false
        - name: 'scaledown'
          webhook_configs:
            - url: http://{{ .Release.Name }}-cloudlaunchserver:8000/cloudman/api/v1/clusters/1/signals/scaledown/
              send_resolved: false
        - name: 'blackhole'
      route:
        group_by:
          - alertname
        group_interval: 2m
        group_wait: 30s
        repeat_interval: 5m
        receiver: 'blackhole'
        routes:
          - match:
              alertname: ClusterOverUtilized
            receiver: 'scaleup'
          - match:
              alertname: ClusterUnderUtilized
            receiver: 'scaledown'
influxdb:
  setDefaultUser:
    enabled: true
    username: "admin"
    # password: "iAmRequired"
  initScripts:
    enabled: true
  persistence:
    storageClass: ebs
